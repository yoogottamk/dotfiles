# using `super` key as modifier
set $mod Mod4
set $alt Mod1

set $config '/home/yog/.config'

# Font for window titles
font pango:JetBrainsMono Nerd Font 14

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
# bindsym $mod+Return exec "i3-sensible-terminal"
bindsym $mod+Return exec "MESA_LOADER_DRIVER_OVERRIDE=iris __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/50_mesa.json kitty -1"
bindsym $mod+Shift+Return exec "alacritty"

# kill focused window
bindsym $mod+Shift+q kill

# start rofi
bindsym $mod+d exec "rofi -show drun -modi drun"
# recent files
bindsym $mod+s exec recent
# edit whatever in vim
bindsym $mod+q exec vimedit

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (tabbed, toggle split)
bindsym $mod+w layout toggle tabbed split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent
# focus the child container
bindsym $mod+z focus child

default_border none
hide_edge_borders both
gaps inner 15
smart_gaps on

set $w0 "0:"
set $w1 "1:"
set $w2 "2:"
set $w3 "3:"
set $w4 "4:"

# switch to workspace
bindsym $mod+grave workspace $w0
bindsym $mod+1 workspace $w1
bindsym $mod+2 workspace $w2
bindsym $mod+3 workspace $w3
bindsym $mod+4 workspace $w4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+grave move container to workspace $w0
bindsym $mod+Shift+1 move container to workspace $w1
bindsym $mod+Shift+2 move container to workspace $w2
bindsym $mod+Shift+3 move container to workspace $w3
bindsym $mod+Shift+4 move container to workspace $w4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# move between workspaces
bindsym $mod+Tab workspace next_on_output
bindsym $mod+Shift+Tab workspace prev_on_output

# restart sway inplace
bindsym $mod+Shift+r reload

# exit sway
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit sway?' -b 'Yes' 'swaymsg exit'

# toggle waybar visibility
bindsym $mod+p exec "pkill -SIGUSR1 waybar"

# waybar
exec_always ~/bin/launch_waybar

# gammastep
exec /usr/bin/gammastep-indicator -l 22.5:88.36 -m wayland

# dropdown term
exec_always MESA_LOADER_DRIVER_OVERRIDE=iris __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/50_mesa.json kitti3 -p LB -s 1.0 0.45 -n dropdown -- -o tab_bar_edge=top -1 --instance-group dropdown
bindsym $alt+slash nop dropdown

# save dbus session address
exec_always echo $DBUS_SESSION_BUS_ADDRESS > ~/.dbusaddr

# managing networks
exec nm-applet --indicator
exec blueman-applet

# get volume controls
bindsym XF86AudioRaiseVolume exec volume_control '+5%'
bindsym XF86AudioLowerVolume exec volume_control '-5%'
bindsym XF86AudioMute exec volume_control 'm'

# get media controls
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# control brightness
bindsym XF86MonBrightnessUp exec brightness_control inc 5
bindsym XF86MonBrightnessDown exec brightness_control dec 5

bindsym XF86Calculator exec kitty -1 python -i /home/yog/.pyload/load-numpy.py

# locking
bindsym $mod+Control+l exec swaylock_cool
exec swayidle -w \
        timeout 300 swaylock_cool \
        timeout 600 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
        before-sleep swaylock_cool

# set wallpaper
output * bg ~/Pictures/wall.jpg fill

# screenshot!
bindsym --release Print exec grimshot --notify copy area
bindsym --release Shift+Print exec grimshot --notify copy output
bindsym --release Control+Print exec grimshot --notify copy window

# notifs
exec dunst
bindsym $mod+x exec dunstctl close
bindsym $mod+n exec dunstctl history-pop
bindsym $mod+Shift+x exec dunstctl close-all
bindsym Control+Shift+Period exec dunstctl close-all

# move workspaces to different monitors
bindsym $mod+Ctrl+greater move workspace to output right
bindsym $mod+Ctrl+less move workspace to output left

bindsym $mod+m mode "media"
bindsym $mod+c mode "config"
bindsym $mod+y mode "copy"
bindsym $mod+r mode "rofi"

# media control mode
mode "media" {
    bindsym space exec playerctl play-pause
    bindsym h exec playerctl previous
    bindsym l exec playerctl next

    bindsym m exec volume_control m
    bindsym k exec volume_control '+5%'
    bindsym j exec volume_control '-5%'

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# config edit mode
mode "config" {
    bindsym p exec gvim $config'/polybar/config'; mode "default"; workspace $w2
    bindsym i exec gvim $config'/i3/config'; mode "default"; workspace $w2
    bindsym d exec gvim $config'/dunst/dunstrc'; mode "default"; workspace $w2

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "copy" {
    bindsym s exec wl-copy <<< "¯\_(ツ)_/¯"; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "rofi" {
    bindsym p exec rofi-pass; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+Shift+Escape exec brightness_control toggle

mode "mic-on" {
    bindsym Return exec bash -c "mic-muter off; pkill -SIGRTMIN+1 waybar"; mode "default"
    bindsym Escape exec bash -c "mic-muter off; pkill -SIGRTMIN+1 waybar"; mode "default"
}

bindsym $alt+space exec bash -c "mic-muter on; pkill -SIGRTMIN+1 waybar"; mode "mic-on"

# default floating window
for_window [app_id="blueman-manager"] floating enable
for_window [class="SimpleScreenRecorder"] floating enable
for_window [instance="nm-connection-editor" class="Nm-connection-editor"] floating enable
for_window [class="UXTerm"] floating enable
for_window [class="feh" instance="feh"] floating enable

# open apps on default workspaces
assign [app_id="firefox"] workspace $w3
for_window [title="Firefox — Sharing Indicator"] floating enable

assign [app_id="telegramdesktop"] workspace $w4
assign [class="discord"] workspace $w4
assign [class="Slack"] workspace $w4
assign [class="Zulip"] workspace $w4

for_window [class="Spotify"] move to workspace 5

# bindsym Control+w nop Disable_Ctrl_W_for_tests
bindsym $mod+Shift+minus move scratchpad

input type:keyboard {
    xkb_options caps:swapescape
}

input type:touchpad {
    tap enabled
    natural_scroll enabled
}

titlebar_border_thickness 1
titlebar_padding 5 1

include /etc/sway/config.d/*

# control mic
bindsym $alt+m exec bash -c "mic-muter; pkill -SIGRTMIN+1 waybar"

exec /usr/lib/xdg-desktop-portal -r
exec /usr/lib/xdg-desktop-portal-wlr

# activitywatch
# exec aw-qt
# exec aw-watcher-window-wayland

# gnome theme
set $gnome-schema org.gnome.desktop.interface

exec_always {
    gsettings set $gnome-schema gtk-theme 'vimix-dark'
    # gsettings set $gnome-schema icon-theme 'Your icon theme'
    # gsettings set $gnome-schema cursor-theme 'Your cursor Theme'
    # gsettings set $gnome-schema font-name 'Your font name'
}
